<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <!--
        See http://www.liquibase.org/manual/home#available_database_refactorings
        for a list of supported elements and attributes
    -->
    <property name="now" value="now()"/>
    <changeSet id="bahmni-offline-global-property" author="tw" context="rel3">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT COUNT(*) FROM global_property where property = 'bahmniOfflineSync.eventlog.filterEvaluator'
            </sqlCheck>
        </preConditions>
        <comment>rel3</comment>
        <insert tableName="global_property">
            <column name="property" value="bahmniOfflineSync.eventlog.filterEvaluator"/>
            <column name="uuid" valueNumeric="name-of-uuid-function"/>
            <column name="description"
                    value="custom filter evaluator"/>
        </insert>
        <modifySql dbms="mysql">
            <replace replace="name-of-uuid-function" with="UUID()"/>
        </modifySql>
    </changeSet>
</databaseChangeLog>